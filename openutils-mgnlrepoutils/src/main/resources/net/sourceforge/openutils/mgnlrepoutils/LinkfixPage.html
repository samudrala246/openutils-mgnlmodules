<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>Linkfix util</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="${this.request.contextPath}/.resources/adminstyle/css/openmindlab.css" type="text/css" rel="stylesheet" />
  </head>
  <body>
    <div class="ma-frame">
      <form id="settingsForm" method="post" action="">
        <h1>Linkfix</h1>
        <div class="ma-framecenter">
          [#if message?exists]
          <pre class="warning">${message}</pre>
          [/#if]
          <div>
            <p>
              This tool will help you fixing internal links in copied pages/sections.
              <br />
              After copying a whole website tree from /OLD to /NEW for example all the links in pages below /NEW will
              still keep as a target pages in /OLD, since links are generated by using the UUID of pages. This tool will
              seach for pages in the new path and will update any link found.
            </p>
            <label for="sourceRepositoriesAndPaths">
              <small>1)</small>
              Source repositories/path
            </label>
            <p>
              The list of path where the substitution will be performed. This is the list of
              <strong>new</strong>
              paths, copied from the original tree.
              <br />
              You may add multiple repositories/path here, separated by a newline.
            </p>
            <textarea name="sourceRepositoriesAndPaths" style="width: 300px; height:120px">${this.sourceRepositoriesAndPaths!}</textarea>
          </div>
          <div>
            <label for="targetRepositories">
              <small>2)</small>
              Target Repositories
            </label>
            <p>
              The list of repositories where link
              <strong>target</strong>
              will be searched. Content into repositories listed here will not be affected, since they are only used for
              references.
            </p>
            <textarea name="targetRepositories" style="width: 300px; height:120px">${this.targetRepositories!}</textarea>
          </div>
          <div>
            <label for="replacements">
              <small>3)</small>
              Replacements
            </label>
            <p>
              Multiple old=new paths to use for replacement.
              <br />
              An entry "/OLD=/NEW" means for example that when a reference is resolved with a path "/OLD/mynode", the
              tool will look for the existence of a resource with the path "/NEW/mynode". If such content exists, the
              link will be updated.
            </p>
            <textarea name="replacements" style="width: 300px; height:120px">${this.replacements!}</textarea>
          </div>
        </div>
        <div class="footer">
          <div id="buttonContainer" class="submit">
            <input type="hidden" id="command" name="command" value="execute" />
            <input id="button" class="button" type="submit" value="Start replacement" />
          </div>
        </div>
      </form>
    </div>
  </body>
</html>